# SmartLift Mobile App

A comprehensive React Native mobile application for fitness tracking, workout management, and trainer-client interactions.

## Project Overview

SmartLift is a feature-rich mobile application built with React Native and Expo that provides a complete fitness ecosystem. The app supports multiple user roles (users, trainers, administrators) and connects to a Ruby on Rails backend API deployed on Railway for data management, user authentication, and AI-powered routine generation.

## Features

### 🔐 **Authentication & User Management**

- Multi-role authentication (User, Trainer, Admin)
- Registration with comprehensive validation and rate limiting
- JWT token-based authentication with automatic refresh
- Role-based navigation and access control
- Profile management with photo upload support

### 👤 **User Experience**

- **Profile Management**: Complete user stats tracking (age, weight, height, gender, fitness level)
- **AI Routine Generation**: Personalized workout routines generated by AI based on user goals and stats
- **Workout Tracking**: Real-time workout tracking with exercise logging and progress monitoring
- **Statistics Dashboard**: Comprehensive fitness progress visualization
- **Exercise Library**: Access to extensive exercise database with video demonstrations

### 👨‍💼 **Trainer Features**

- **User Management**: View and manage assigned users
- **Routine Validation**: Review, edit, and approve AI-generated routines for users
- **Exercise Management**: Add and edit exercise videos and content
- **Progress Monitoring**: Track user progress and workout completion

### 🛠️ **Admin Panel**

- **User Administration**: Complete CRUD operations for users and trainers
- **System Management**: Oversight of all platform activities
- **Assignment Management**: Assign users to specific trainers
- **Detailed Reporting**: Access to user and trainer detailed profiles

### 🎨 **UI/UX**

- Modern interface with NativeWind styling
- Responsive design optimized for various device sizes
- Smooth navigation with role-based screen management
- Intuitive user flows with comprehensive error handling

## Tech Stack

- **Frontend**

  - React Native with Expo SDK
  - TypeScript for comprehensive type safety
  - NativeWind v4.0.1 (Tailwind CSS for React Native)
  - React Navigation v7 for multi-stack navigation
  - Axios with interceptors for API requests
  - AsyncStorage for local data persistence
  - React Context for global state management
  - Custom hooks for business logic

- **Backend**
  - Ruby on Rails API (deployed on Railway)
  - PostgreSQL database with optimized queries
  - JWT authentication with role-based authorization
  - OpenAI integration for AI routine generation
  - Rate limiting and security middleware
  - Action Cable for real-time features

## Getting Started

### Prerequisites

- Node.js (v14 or later)
- npm or yarn
- Expo CLI
- Android Studio (for Android development)
- Xcode (for iOS development, macOS only)

### Installation

1. Clone the repository:

   ```bash
   git clone <repository-url>
   cd smartliftfront
   ```

2. Install dependencies:

   ```bash
   npm install
   # or
   yarn install
   ```

3. Start the development server:

   ```bash
   npx expo start
   ```

4. Run on a device or emulator:
   - Press `a` to run on Android emulator
   - Press `i` to run on iOS simulator (macOS only)
   - Scan the QR code with the Expo Go app on your physical device

### Environment Configuration

The app is configured to connect to the production backend API at:

- **Production**: `https://protective-mercy-dev.up.railway.app/`
- **Local Development**: `http://10.0.2.2:3000/` for Android emulator, `http://localhost:3000/` for iOS simulator

The API URL is automatically configured through the `apiClient.ts` service. For local development, ensure your Rails backend is running on port 3000.

## Project Structure

```
smartliftfront/
├── assets/                     # Images, fonts, and other static assets
├── components/                 # Reusable UI components
│   ├── AppAlert.tsx           # Centralized alert component
│   ├── Avatar.tsx             # User profile picture component
│   ├── VideoUrlEditor.tsx     # Exercise video URL editor modal
│   └── RoutineEditModal.tsx   # AI routine editing interface
├── contexts/                   # React Context providers
│   └── AuthContext.tsx        # Authentication state management
├── hooks/                      # Custom React hooks
│   └── useAuthRedirect.ts     # Authentication flow management
├── screens/                    # Screen components organized by user role
│   ├── auth/                  # Authentication screens
│   │   ├── LoginScreen.tsx
│   │   └── RegisterScreen.tsx
│   ├── user/                  # User role screens
│   │   ├── UserHomeScreen.tsx
│   │   ├── StatsProfileScreen.tsx
│   │   ├── AIRoutineGeneratorScreen.tsx
│   │   └── WorkoutTrackerScreen.tsx
│   ├── trainer/               # Trainer role screens
│   │   ├── CoachHomeScreen.tsx
│   │   ├── RoutineValidationListScreen.tsx
│   │   └── ExerciseManagementScreen.tsx
│   └── admin/                 # Admin role screens
│       ├── AdminCoachListScreen.tsx
│       ├── AdminUserListScreen.tsx
│       └── AdminCoachDetailScreen.tsx
├── services/                   # API services and business logic
│   ├── apiClient.ts           # Centralized API client with interceptors
│   ├── authService.ts         # Authentication service
│   ├── userStatsService.ts    # User statistics management
│   ├── routineService.ts      # Workout routine operations
│   ├── exerciseService.ts     # Exercise management
│   ├── adminService.ts        # Admin panel operations
│   └── routineValidationService.ts # AI routine validation
├── types/                      # TypeScript type definitions
│   ├── declarations/          # Module declarations for third-party libraries
│   ├── exercise.ts           # Exercise-related types
│   ├── routine.ts            # Routine and workout types
│   └── index.ts              # Shared type definitions and navigation
├── App.tsx                     # Main application component with navigation
├── global.css                 # Global styles for NativeWind
└── nativewind-setup.ts        # NativeWind configuration
```

## Development Notes

### TypeScript Declarations

The project uses TypeScript declarations in the `types/declarations/` directory to handle module compatibility issues, particularly with React Navigation v7 which is distributed as an ESM module.

### Styling

The app uses NativeWind v4.0.1 for styling, which provides a Tailwind CSS-like experience for React Native. Styles are applied using the `className` prop.

### Authentication Flow

1. User registers with comprehensive validation (rate limiting, bot detection)
2. Backend returns JWT token with user role information
3. Token is stored securely in AsyncStorage
4. Axios interceptors automatically include token in all API requests
5. Role-based navigation redirects user to appropriate home screen:
   - **Users**: UserHomeScreen with workout tracking and AI routines
   - **Trainers**: CoachHomeScreen with user management and routine validation
   - **Admins**: AdminHomeScreen with full system administration

### Key Architectural Decisions

- **Role-Based Navigation**: Separate navigation stacks for different user roles
- **Centralized API Client**: Single `apiClient.ts` with authentication interceptors
- **TypeScript Safety**: Comprehensive type definitions for all API responses
- **Error Handling**: Centralized error handling with user-friendly Spanish messages
- **State Management**: React Context for authentication, local state for screens
- **Security**: Rate limiting, input validation, and secure token storage

### AI Integration

The app integrates with OpenAI through the backend to provide:

- **Personalized Routine Generation**: AI creates workout routines based on user stats and goals
- **Trainer Review System**: AI-generated routines require trainer approval before use
- **Customization**: Trainers can edit AI routines before validation

### Testing & Code Quality

- TypeScript strict mode enabled for maximum type safety
- Comprehensive error handling across all services
- Input validation on all user forms
- Rate limiting protection against abuse
- Clean code architecture with separation of concerns

## Contributing

1. Fork the repository
2. Create your feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add some amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request
